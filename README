A collection of bugfixes and patches for Dexter's 1.3 ROM


ChangeLog:
----------

2011/02/24 stock221v13-bugfix-1:

 * Replace /system/oc with modular scripts in /system/etc/init.c/
      00_interactive (load interactive governor),
      05_overclock (load milestone overclock),
      10_sdext (manage /sd-ext partition, app2ext, Link2SD, etc)

 * Fix milestone overclock persistence (05_overclock)

   Milestone Overclock's preferences are parsed from the XML in
   /data/data and the sdcard and are applied after oc-settings.
   oc-settings is now dos2unix transformed before execution.

 * Improved for managment of /sd-ext (10_sdext)

    * Add kousik's ext2/3 mount autodetection hack

    * Perform e2fsck before mounting /sd-ext (modeled on CyanogenMod)
      [/system/xbin/e2fsck copied from OpenRecovery/sbin/e2fsck-or]

    * Use "-o noatime,nodiratime" (modeled on CyanogenMod)

    * Allow more control of /sd-ext. Users enable or disable features
      by creating directories on /sd-ext

      /sd-ext/app          (mode /data/app to /sd-ext [apps2sd])
      /sd-ext/dalvik-cache (move /data/dalvik-cache to /sd-ext)
      /sd-ext/app-private  (move /data/app-private to /sd-ext)
      /sd-ext/link2sd      (enable Link2SD 1.5.1 support)

    * apps2sd/app2ext is nolonger automatically enabled. To enable
      apps2sd create an /sd-ext/app directory and reboot. If you've
      already have /sd-ext/app no changes are needed.

    * Allow dalvik-cache to be moved to /sd-ext (create
      /sd-ext/dalvik-cache to enable).

 * Add support for Link2SD 1.5.1 (create /sd-ext/link2sd to enable)
   Link2SD support will only be enabled if both /sd-ext/link2sd exists
   AND /sd-ext/app does not exist. 

   Note: Link2SD now has an option to move corresponding dalvik-cache
         with apps to /sd-ext. DON'T mix this with moving the entire
         dalvik-cache to /sd-ext/dalvik-cache. Pick one or the other.
      

Usage:
------

1) Build the update

    ./build-update.sh patchname

   This will create an OpenRecovery update called patchname.zip inside
   the updates/ directory.

2) Copy the update into OpenRecovery/updates/ on the sdcard.

3) Boot into OpenRecovery.

4) Use "Apply Update" menu option and select your update.


Notes:
------

 * Not compatible with 1.2a.

 * The contents of src/system/ramdisk/ becomes the root filesystem
   after 2ndinit. /system/ramdisk.tar is build automatically from this
   directory by build script.

 * The generated patch uses the unsigned, nobinary OpenRecovery update
   method because I don't know any better and I don't know what are
   the advantages of the more complicated types.

 * git does not currently track empty directories so .gitignore files
   are present inside directories that are intended to be empty such
   as src/system/ramdisk/sd-ext. The build script excludes all
   .gitignore files.

 * The build script creates META-INF/com/google/android/updater-script
   from META-INF/com/google/android/updater-script.in.  Currently all
   this does is update personalize display when the update is applied
   in OpenRecovery to include the patchname.

 * Be sure to set file ownership and permissions in
   patch/META-INF/com/google/android/updater-script.in

 * The ./build-update.sh build script has been tested on Debian,
   Ubuntu and MacOS X systems but doesn't do anything wierd. It needs
   bash, GNU tar, sed, and zip.

 * Thanks to Dexter and all the other wonderful, friendly contributers
   on XDA.

 * Development follows discussions and feedback on
   http://forum.xda-developers.com/showthread.php?t=939644
